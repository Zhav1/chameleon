{"version":3,"sources":["../src/lib/chameleon/schema.ts","../src/lib/chameleon/fonts.ts","../src/lib/chameleon/defaults.ts","../src/components/chameleon/ChameleonRoot.tsx","../src/components/chameleon/MorphLayout.tsx","../src/components/chameleon/MorphText.tsx","../src/components/chameleon/VibeInput.tsx","../src/components/chameleon/ReadingModeSelector.tsx","../src/components/chameleon/CustomVibeInput.tsx","../src/components/chameleon/ThinkingBubble.tsx","../src/components/chameleon/VibePopover.tsx","../src/components/chameleon/ChameleonWidget.tsx","../src/components/chameleon/SkeletonMorph.tsx","../src/components/chameleon/VibeCapture.tsx","../src/components/chameleon/VoiceVibe.tsx"],"names":["VibeSchema","z","ALLOWED_FONTS","ALLOWED_LAYOUTS","ALLOWED_TONES","fontSans","Inter","fontSerif","Merriweather","fontMono","JetBrains_Mono","fontDisplay","Bangers","fontHand","Patrick_Hand","fontMap","getAllFontVariables","DEFAULT_VIBE","PRESET_VIBES","ChameleonContext","createContext","ChameleonRoot","children","initialVibe","vibeParam","setVibeParam","useQueryState","vibe","setVibeState","useState","isLoading","setIsLoading","error","setError","useEffect","saved","e","setVibe","useCallback","description","response","newVibe","slug","err","setVibeFromPreset","presetKey","preset","resetVibe","jsx","useChameleon","context","useContext","MorphLayout","className","_a","selectedFont","fontFamilyValue","layoutClass","MorphCard","MorphButton","onClick","disabled","variant","isPrimary","MorphText","originalText","sourceUrl","autoRewrite","displayText","setDisplayText","isStreaming","setIsStreaming","rewriteContent","reader","decoder","result","done","value","chunk","data","jsxs","MorphHeading","level","content","Fragment","headingClass","VibeInput","placeholder","input","setInput","VibePresets","presets","key","getPresetEmoji","name","emoji","READING_MODES","ReadingModeSelector","onSelect","handleSelect","mode","activeMode","isActive","EXAMPLE_PLACEHOLDERS","CustomVibeInput","onSubmit","setValue","suggestion","THINKING_MESSAGES","ThinkingBubble","isThinking","steps","vibeType","messages","stepDelay","visibleSteps","setVisibleSteps","currentIndex","setCurrentIndex","thinkingSteps","item","i","timer","prev","newSteps","__spreadProps","__spreadValues","step","index","useThinkingState","duration","setIsThinking","startThinking","stopThinking","VibePopover","isOpen","onClose","anchorRef","popoverRef","useRef","handleClickOutside","ChameleonWidget","position","setIsOpen","buttonRef","handleKeyDown","SkeletonMorph","type","width","height","lines","style","animate","baseStyle","_","SkeletonMorphContent","fallback","VibeCapture","onCapture","isDragging","setIsDragging","isProcessing","setIsProcessing","preview","setPreview","fileInputRef","processImage","file","dataUrl","base64","resolve","reject","base64Data","handleDragEnter","handleDragLeave","handleDragOver","handleDrop","files","handleFileChange","handlePaste","items","VoiceVibe","onResult","isListening","setIsListening","transcript","setTranscript","isSupported","setIsSupported","recognitionRef","getErrorMessage","handleTranscript","text","SpeechRecognitionAPI","recognition","event","current","transcriptText","toggleListening"],"mappings":"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","file":"index.mjs","sourcesContent":["import { z } from 'zod';\r\n\r\n/**\r\n * VibeSchema - The contract for AI-generated styling\r\n * Uses strict validation to prevent hallucinations\r\n */\r\nexport const VibeSchema = z.object({\r\n  themeName: z.string().describe(\"A creative name for this theme, e.g. 'Cyberpunk'\"),\r\n  colors: z.object({\r\n    primary: z.string().regex(/^#[0-9A-Fa-f]{6}$/, \"Must be valid hex color\"),\r\n    background: z.string().regex(/^#[0-9A-Fa-f]{6}$/, \"Must be valid hex color\"),\r\n    text: z.string().regex(/^#[0-9A-Fa-f]{6}$/, \"Must be valid hex color\"),\r\n    accent: z.string().regex(/^#[0-9A-Fa-f]{6}$/, \"Must be valid hex color\"),\r\n  }),\r\n  typography: z.object({\r\n    fontFamily: z.enum(['sans', 'serif', 'mono', 'display', 'hand']),\r\n    baseSize: z.enum(['14px', '16px', '18px', '24px']),\r\n  }),\r\n  layout: z.object({\r\n    style: z.enum(['standard', 'dense', 'hero']),\r\n    borderRadius: z.string(), // e.g. \"0.5rem\" or \"0px\"\r\n  }),\r\n  voice: z.object({\r\n    tone: z.enum(['neutral', 'technical', 'simplified', 'storytelling']),\r\n    emojiFrequency: z.enum(['none', 'low', 'high']),\r\n  })\r\n});\r\n\r\nexport type VibeType = z.infer<typeof VibeSchema>;\r\n\r\n/**\r\n * Safe list of allowed fonts for AI to choose from\r\n * These are the ONLY fonts the AI can select\r\n */\r\nexport const ALLOWED_FONTS = ['sans', 'serif', 'mono', 'display', 'hand'] as const;\r\nexport type FontFamily = typeof ALLOWED_FONTS[number];\r\n\r\n/**\r\n * Safe list of allowed layout modes\r\n */\r\nexport const ALLOWED_LAYOUTS = ['standard', 'dense', 'hero'] as const;\r\nexport type LayoutStyle = typeof ALLOWED_LAYOUTS[number];\r\n\r\n/**\r\n * Safe list of allowed voice tones\r\n */\r\nexport const ALLOWED_TONES = ['neutral', 'technical', 'simplified', 'storytelling'] as const;\r\nexport type VoiceTone = typeof ALLOWED_TONES[number];\r\n","import { Inter, Merriweather, JetBrains_Mono, Bangers, Patrick_Hand } from 'next/font/google';\r\n\r\n/**\r\n * Font configurations using next/font/google\r\n * These are the ONLY fonts the AI is allowed to select\r\n */\r\n\r\nexport const fontSans = Inter({\r\n    subsets: ['latin'],\r\n    variable: '--font-sans',\r\n    display: 'swap',\r\n});\r\n\r\nexport const fontSerif = Merriweather({\r\n    weight: ['400', '700'],\r\n    subsets: ['latin'],\r\n    variable: '--font-serif',\r\n    display: 'swap',\r\n});\r\n\r\nexport const fontMono = JetBrains_Mono({\r\n    subsets: ['latin'],\r\n    variable: '--font-mono',\r\n    display: 'swap',\r\n});\r\n\r\nexport const fontDisplay = Bangers({\r\n    weight: '400',\r\n    subsets: ['latin'],\r\n    variable: '--font-display',\r\n    display: 'swap',\r\n});\r\n\r\nexport const fontHand = Patrick_Hand({\r\n    weight: '400',\r\n    subsets: ['latin'],\r\n    variable: '--font-hand',\r\n    display: 'swap',\r\n});\r\n\r\n/**\r\n * Font map for dynamic lookup based on AI selection\r\n */\r\nexport const fontMap = {\r\n    sans: fontSans,\r\n    serif: fontSerif,\r\n    mono: fontMono,\r\n    display: fontDisplay,\r\n    hand: fontHand,\r\n} as const;\r\n\r\nexport type FontKey = keyof typeof fontMap;\r\n\r\n/**\r\n * Get all font class names for the HTML body\r\n */\r\nexport const getAllFontVariables = () => {\r\n    return `${fontSans.variable} ${fontSerif.variable} ${fontMono.variable} ${fontDisplay.variable} ${fontHand.variable}`;\r\n};\r\n","import { VibeType } from './schema';\r\n\r\n/**\r\n * Default vibe - fallback when AI generation fails or for initial state\r\n * Uses clean, professional styling (Academic persona)\r\n */\r\nexport const DEFAULT_VIBE: VibeType = {\r\n    themeName: 'Academic',\r\n    colors: {\r\n        primary: '#1a1a2e',\r\n        background: '#fafafa',\r\n        text: '#1a1a2e',\r\n        accent: '#4a90d9',\r\n    },\r\n    typography: {\r\n        fontFamily: 'sans',\r\n        baseSize: '16px',\r\n    },\r\n    layout: {\r\n        style: 'standard',\r\n        borderRadius: '0.5rem',\r\n    },\r\n    voice: {\r\n        tone: 'neutral',\r\n        emojiFrequency: 'none',\r\n    }\r\n};\r\n\r\n/**\r\n * Preset vibes for quick selection\r\n */\r\nexport const PRESET_VIBES: Record<string, VibeType> = {\r\n    academic: DEFAULT_VIBE,\r\n\r\n    cyberpunk: {\r\n        themeName: 'Cyberpunk',\r\n        colors: {\r\n            primary: '#00ff41',\r\n            background: '#0d0208',\r\n            text: '#00ff41',\r\n            accent: '#ff0080',\r\n        },\r\n        typography: {\r\n            fontFamily: 'mono',\r\n            baseSize: '14px',\r\n        },\r\n        layout: {\r\n            style: 'dense',\r\n            borderRadius: '0px',\r\n        },\r\n        voice: {\r\n            tone: 'technical',\r\n            emojiFrequency: 'none',\r\n        }\r\n    },\r\n\r\n    kid: {\r\n        themeName: 'Fun Zone',\r\n        colors: {\r\n            primary: '#ff6b6b',\r\n            background: '#fff9db',\r\n            text: '#2d3436',\r\n            accent: '#00b894',\r\n        },\r\n        typography: {\r\n            fontFamily: 'display',\r\n            baseSize: '24px',\r\n        },\r\n        layout: {\r\n            style: 'hero',\r\n            borderRadius: '1.5rem',\r\n        },\r\n        voice: {\r\n            tone: 'simplified',\r\n            emojiFrequency: 'high',\r\n        }\r\n    },\r\n\r\n    cozy: {\r\n        themeName: 'Cozy Cabin',\r\n        colors: {\r\n            primary: '#8b4513',\r\n            background: '#fdf5e6',\r\n            text: '#3e2723',\r\n            accent: '#d4a574',\r\n        },\r\n        typography: {\r\n            fontFamily: 'hand',\r\n            baseSize: '18px',\r\n        },\r\n        layout: {\r\n            style: 'standard',\r\n            borderRadius: '1rem',\r\n        },\r\n        voice: {\r\n            tone: 'storytelling',\r\n            emojiFrequency: 'low',\r\n        }\r\n    },\r\n};\r\n","'use client';\r\n\r\nimport {\r\n    createContext,\r\n    useContext,\r\n    useState,\r\n    useCallback,\r\n    useEffect,\r\n    type ReactNode\r\n} from 'react';\r\nimport { useQueryState } from 'nuqs';\r\nimport { VibeType } from '@/lib/chameleon/schema';\r\nimport { DEFAULT_VIBE, PRESET_VIBES } from '@/lib/chameleon/defaults';\r\n\r\ninterface ChameleonContextType {\r\n    vibe: VibeType;\r\n    isLoading: boolean;\r\n    error: string | null;\r\n    setVibe: (description: string) => Promise<void>;\r\n    setVibeFromPreset: (presetKey: string) => void;\r\n    resetVibe: () => void;\r\n}\r\n\r\nconst ChameleonContext = createContext<ChameleonContextType | null>(null);\r\n\r\ninterface ChameleonRootProps {\r\n    children: ReactNode;\r\n    initialVibe?: VibeType;\r\n}\r\n\r\nexport function ChameleonRoot({ children, initialVibe = DEFAULT_VIBE }: ChameleonRootProps) {\r\n    const [vibeParam, setVibeParam] = useQueryState('vibe');\r\n    const [vibe, setVibeState] = useState<VibeType>(initialVibe);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    // Load vibe from URL param on mount\r\n    useEffect(() => {\r\n        if (vibeParam && PRESET_VIBES[vibeParam]) {\r\n            setVibeState(PRESET_VIBES[vibeParam]);\r\n        }\r\n    }, [vibeParam]);\r\n\r\n    // Persist vibe to localStorage\r\n    useEffect(() => {\r\n        if (typeof window !== 'undefined') {\r\n            localStorage.setItem('chameleon-vibe', JSON.stringify(vibe));\r\n        }\r\n    }, [vibe]);\r\n\r\n    // Load from localStorage on mount (if no URL param)\r\n    useEffect(() => {\r\n        if (!vibeParam && typeof window !== 'undefined') {\r\n            const saved = localStorage.getItem('chameleon-vibe');\r\n            if (saved) {\r\n                try {\r\n                    setVibeState(JSON.parse(saved));\r\n                } catch {\r\n                    // Invalid JSON, ignore\r\n                }\r\n            }\r\n        }\r\n    }, [vibeParam]);\r\n\r\n    const setVibe = useCallback(async (description: string) => {\r\n        setIsLoading(true);\r\n        setError(null);\r\n\r\n        try {\r\n            const response = await fetch('/api/vibe', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ description }),\r\n            });\r\n\r\n            if (!response.ok) {\r\n                throw new Error('Failed to generate vibe');\r\n            }\r\n\r\n            const newVibe: VibeType = await response.json();\r\n            setVibeState(newVibe);\r\n\r\n            // Update URL param with slugified theme name\r\n            const slug = newVibe.themeName.toLowerCase().replace(/\\s+/g, '-').replace(/[^a-z0-9-]/g, '');\r\n            setVibeParam(slug);\r\n        } catch (err) {\r\n            setError(err instanceof Error ? err.message : 'Unknown error');\r\n            console.error('Vibe generation failed:', err);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    }, [setVibeParam]);\r\n\r\n    const setVibeFromPreset = useCallback((presetKey: string) => {\r\n        const preset = PRESET_VIBES[presetKey];\r\n        if (preset) {\r\n            setVibeState(preset);\r\n            setVibeParam(presetKey);\r\n        }\r\n    }, [setVibeParam]);\r\n\r\n    const resetVibe = useCallback(() => {\r\n        setVibeState(DEFAULT_VIBE);\r\n        setVibeParam(null);\r\n        if (typeof window !== 'undefined') {\r\n            localStorage.removeItem('chameleon-vibe');\r\n        }\r\n    }, [setVibeParam]);\r\n\r\n    return (\r\n        <ChameleonContext.Provider value={{\r\n            vibe,\r\n            isLoading,\r\n            error,\r\n            setVibe,\r\n            setVibeFromPreset,\r\n            resetVibe\r\n        }}>\r\n            {children}\r\n        </ChameleonContext.Provider>\r\n    );\r\n}\r\n\r\nexport function useChameleon(): ChameleonContextType {\r\n    const context = useContext(ChameleonContext);\r\n    if (!context) {\r\n        throw new Error('useChameleon must be used within a ChameleonRoot');\r\n    }\r\n    return context;\r\n}\r\n","'use client';\r\n\r\nimport { type ReactNode } from 'react';\r\nimport { useChameleon } from './ChameleonRoot';\r\nimport { fontMap } from '@/lib/chameleon/fonts';\r\n\r\ninterface MorphLayoutProps {\r\n    children: ReactNode;\r\n    className?: string;\r\n}\r\n\r\n/**\r\n * MorphLayout - Injects CSS variables from the current vibe into the DOM\r\n * All children will inherit these variables for dynamic styling\r\n */\r\nexport function MorphLayout({ children, className = '' }: MorphLayoutProps) {\r\n    const { vibe, isLoading } = useChameleon();\r\n\r\n    // Get the actual font family value from fontMap\r\n    const selectedFont = fontMap[vibe.typography.fontFamily];\r\n    const fontFamilyValue = selectedFont?.style?.fontFamily || 'system-ui, sans-serif';\r\n\r\n    // Get layout class based on vibe\r\n    const layoutClass = `layout-${vibe.layout.style}`;\r\n\r\n    // Debug log to track state updates\r\n    console.log('[MorphLayout] Vibe updated:', {\r\n        themeName: vibe.themeName,\r\n        backgroundColor: vibe.colors.background,\r\n        fontFamily: vibe.typography.fontFamily,\r\n        resolvedFont: fontFamilyValue\r\n    });\r\n\r\n    return (\r\n        <div\r\n            className={`morph-container ${layoutClass} ${isLoading ? 'morphing' : ''} ${className}`}\r\n            style={{\r\n                // Color variables\r\n                '--chameleon-bg': vibe.colors.background,\r\n                '--chameleon-text': vibe.colors.text,\r\n                '--chameleon-primary': vibe.colors.primary,\r\n                '--chameleon-accent': vibe.colors.accent,\r\n\r\n                // Typography variables\r\n                '--chameleon-font': fontFamilyValue,\r\n                '--chameleon-base-size': vibe.typography.baseSize,\r\n\r\n                // Layout variables\r\n                '--chameleon-radius': vibe.layout.borderRadius,\r\n\r\n                // Apply the theme immediately with ACTUAL values\r\n                backgroundColor: vibe.colors.background,\r\n                color: vibe.colors.text,\r\n                fontFamily: fontFamilyValue,\r\n                fontSize: vibe.typography.baseSize,\r\n                borderRadius: vibe.layout.borderRadius,\r\n                minHeight: '100vh',\r\n                transition: 'all 300ms ease-in-out',\r\n            } as React.CSSProperties}\r\n        >\r\n            {children}\r\n        </div>\r\n    );\r\n}\r\n\r\n/**\r\n * MorphCard - A card component that respects the current vibe\r\n */\r\nexport function MorphCard({ children, className = '' }: MorphLayoutProps) {\r\n    const { vibe } = useChameleon();\r\n\r\n    return (\r\n        <div\r\n            className={`morph-card ${className}`}\r\n            style={{\r\n                backgroundColor: vibe.colors.background,\r\n                borderColor: `${vibe.colors.text}20`,\r\n                borderRadius: vibe.layout.borderRadius,\r\n            }}\r\n        >\r\n            {children}\r\n        </div>\r\n    );\r\n}\r\n\r\n/**\r\n * MorphButton - A button component that respects the current vibe\r\n */\r\ninterface MorphButtonProps {\r\n    children: ReactNode;\r\n    onClick?: () => void;\r\n    disabled?: boolean;\r\n    variant?: 'primary' | 'secondary';\r\n    className?: string;\r\n}\r\n\r\nexport function MorphButton({\r\n    children,\r\n    onClick,\r\n    disabled,\r\n    variant = 'primary',\r\n    className = ''\r\n}: MorphButtonProps) {\r\n    const { vibe, isLoading } = useChameleon();\r\n\r\n    const isPrimary = variant === 'primary';\r\n\r\n    return (\r\n        <button\r\n            onClick={onClick}\r\n            disabled={disabled || isLoading}\r\n            className={`morph-button ${className}`}\r\n            style={{\r\n                backgroundColor: isPrimary ? vibe.colors.primary : 'transparent',\r\n                color: isPrimary ? vibe.colors.background : vibe.colors.primary,\r\n                border: isPrimary ? 'none' : `2px solid ${vibe.colors.primary}`,\r\n                borderRadius: vibe.layout.borderRadius,\r\n                opacity: disabled ? 0.5 : 1,\r\n                cursor: disabled ? 'not-allowed' : 'pointer',\r\n            }}\r\n        >\r\n            {isLoading ? ' Morphing...' : children}\r\n        </button>\r\n    );\r\n}\r\n","'use client';\r\n\r\nimport { useEffect, useState, useCallback } from 'react';\r\nimport { useChameleon } from './ChameleonRoot';\r\n\r\ninterface MorphTextProps {\r\n    /** The original text content to display/transform */\r\n    originalText: string;\r\n    /** Optional source URL for grounding */\r\n    sourceUrl?: string;\r\n    /** Custom class name */\r\n    className?: string;\r\n    /** Whether to allow manual rewrite trigger */\r\n    autoRewrite?: boolean;\r\n}\r\n\r\n/**\r\n * MorphText - Adaptive text component that rewrites content based on vibe tone\r\n * \r\n * - If tone is 'neutral', displays originalText as-is\r\n * - If tone is changed, calls Gemini Pro to rewrite the content\r\n */\r\nexport function MorphText({\r\n    originalText,\r\n    sourceUrl,\r\n    className = '',\r\n    autoRewrite = true\r\n}: MorphTextProps) {\r\n    const { vibe } = useChameleon();\r\n    const [displayText, setDisplayText] = useState(originalText);\r\n    const [isStreaming, setIsStreaming] = useState(false);\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    const rewriteContent = useCallback(async () => {\r\n        // Don't rewrite if tone is neutral\r\n        if (vibe.voice.tone === 'neutral') {\r\n            setDisplayText(originalText);\r\n            return;\r\n        }\r\n\r\n        setIsStreaming(true);\r\n        setError(null);\r\n\r\n        try {\r\n            const response = await fetch('/api/rewrite', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    text: originalText,\r\n                    tone: vibe.voice.tone,\r\n                    emojiFrequency: vibe.voice.emojiFrequency,\r\n                    sourceUrl,\r\n                }),\r\n            });\r\n\r\n            if (!response.ok) {\r\n                throw new Error('Failed to rewrite content');\r\n            }\r\n\r\n            // Handle streaming response\r\n            const reader = response.body?.getReader();\r\n            const decoder = new TextDecoder();\r\n            let result = '';\r\n\r\n            if (reader) {\r\n                while (true) {\r\n                    const { done, value } = await reader.read();\r\n                    if (done) break;\r\n\r\n                    const chunk = decoder.decode(value, { stream: true });\r\n                    result += chunk;\r\n                    setDisplayText(result);\r\n                }\r\n            } else {\r\n                // Fallback for non-streaming response\r\n                const data = await response.json();\r\n                setDisplayText(data.text || originalText);\r\n            }\r\n        } catch (err) {\r\n            setError(err instanceof Error ? err.message : 'Rewrite failed');\r\n            setDisplayText(originalText);\r\n        } finally {\r\n            setIsStreaming(false);\r\n        }\r\n    }, [originalText, vibe.voice.tone, vibe.voice.emojiFrequency, sourceUrl]);\r\n\r\n    // Auto-rewrite when tone changes\r\n    useEffect(() => {\r\n        if (autoRewrite) {\r\n            rewriteContent();\r\n        }\r\n    }, [autoRewrite, rewriteContent]);\r\n\r\n    // Reset to original when originalText changes\r\n    useEffect(() => {\r\n        setDisplayText(originalText);\r\n    }, [originalText]);\r\n\r\n    return (\r\n        <div className={`morph-text ${isStreaming ? 'morphing' : ''} ${className}`}>\r\n            <div className=\"morph-text-content whitespace-pre-wrap\">\r\n                {displayText}\r\n            </div>\r\n\r\n            {isStreaming && (\r\n                <div className=\"morph-text-indicator text-sm opacity-60 mt-2\">\r\n                     Adapting content...\r\n                </div>\r\n            )}\r\n\r\n            {error && (\r\n                <div className=\"morph-text-error text-red-500 text-sm mt-2\">\r\n                     {error}\r\n                </div>\r\n            )}\r\n\r\n            {!autoRewrite && vibe.voice.tone !== 'neutral' && (\r\n                <button\r\n                    onClick={rewriteContent}\r\n                    disabled={isStreaming}\r\n                    className=\"morph-text-button mt-2 text-sm underline opacity-70 hover:opacity-100\"\r\n                >\r\n                     Rewrite for {vibe.voice.tone} tone\r\n                </button>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\n/**\r\n * MorphHeading - An adaptive heading component\r\n */\r\ninterface MorphHeadingProps {\r\n    children: string;\r\n    level?: 1 | 2 | 3 | 4 | 5 | 6;\r\n    className?: string;\r\n}\r\n\r\nexport function MorphHeading({\r\n    children,\r\n    level = 2,\r\n    className = ''\r\n}: MorphHeadingProps) {\r\n    const { vibe } = useChameleon();\r\n\r\n    // Add emoji based on frequency\r\n    const getEmoji = () => {\r\n        if (vibe.voice.emojiFrequency === 'none') return '';\r\n        if (vibe.voice.emojiFrequency === 'high') return ' ';\r\n        return '';\r\n    };\r\n\r\n    const content = <>{children}{getEmoji()}</>;\r\n    const headingClass = `morph-heading ${className}`;\r\n\r\n    switch (level) {\r\n        case 1: return <h1 className={headingClass}>{content}</h1>;\r\n        case 2: return <h2 className={headingClass}>{content}</h2>;\r\n        case 3: return <h3 className={headingClass}>{content}</h3>;\r\n        case 4: return <h4 className={headingClass}>{content}</h4>;\r\n        case 5: return <h5 className={headingClass}>{content}</h5>;\r\n        case 6: return <h6 className={headingClass}>{content}</h6>;\r\n        default: return <h2 className={headingClass}>{content}</h2>;\r\n    }\r\n}\r\n\r\n","'use client';\r\n\r\nimport { useState, FormEvent } from 'react';\r\nimport { useChameleon } from './ChameleonRoot';\r\nimport { MorphButton } from './MorphLayout';\r\nimport { PRESET_VIBES } from '@/lib/chameleon/defaults';\r\n\r\ninterface VibeInputProps {\r\n    placeholder?: string;\r\n    className?: string;\r\n}\r\n\r\n/**\r\n * VibeInput - Natural language input for setting vibes\r\n */\r\nexport function VibeInput({\r\n    placeholder = \"Describe your vibe... (e.g., 'Make it look like a hacker movie')\",\r\n    className = ''\r\n}: VibeInputProps) {\r\n    const { setVibe, isLoading, error } = useChameleon();\r\n    const [input, setInput] = useState('');\r\n\r\n    const handleSubmit = async (e: FormEvent) => {\r\n        e.preventDefault();\r\n        if (input.trim() && !isLoading) {\r\n            await setVibe(input.trim());\r\n            setInput('');\r\n        }\r\n    };\r\n\r\n    return (\r\n        <form onSubmit={handleSubmit} className={`vibe-input-form ${className}`}>\r\n            <div className=\"flex gap-3 items-center\">\r\n                <input\r\n                    type=\"text\"\r\n                    value={input}\r\n                    onChange={(e) => setInput(e.target.value)}\r\n                    placeholder={placeholder}\r\n                    disabled={isLoading}\r\n                    className=\"flex-1 px-4 py-3 rounded-lg border-2 border-current/20 bg-transparent \r\n                     focus:outline-none focus:border-current/40 transition-colors\r\n                     placeholder:opacity-50\"\r\n                    style={{ borderRadius: 'var(--chameleon-radius)' }}\r\n                />\r\n                <MorphButton disabled={!input.trim() || isLoading}>\r\n                    {isLoading ? '' : ' Morph'}\r\n                </MorphButton>\r\n            </div>\r\n            {error && (\r\n                <p className=\"text-red-500 text-sm mt-2\"> {error}</p>\r\n            )}\r\n        </form>\r\n    );\r\n}\r\n\r\n/**\r\n * VibePresets - Quick-select buttons for preset vibes\r\n */\r\ninterface VibePresetsProps {\r\n    className?: string;\r\n}\r\n\r\nexport function VibePresets({ className = '' }: VibePresetsProps) {\r\n    const { setVibeFromPreset, vibe } = useChameleon();\r\n\r\n    const presets = Object.entries(PRESET_VIBES).map(([key, preset]) => ({\r\n        key,\r\n        name: preset.themeName,\r\n        emoji: getPresetEmoji(key),\r\n    }));\r\n\r\n    return (\r\n        <div className={`vibe-presets flex flex-wrap gap-2 ${className}`}>\r\n            {presets.map(({ key, name, emoji }) => (\r\n                <button\r\n                    key={key}\r\n                    onClick={() => setVibeFromPreset(key)}\r\n                    className={`px-4 py-2 rounded-full border-2 transition-all hover:scale-105\r\n                      ${vibe.themeName === name\r\n                            ? 'border-current bg-current/10 font-semibold'\r\n                            : 'border-current/30 hover:border-current/60'\r\n                        }`}\r\n                >\r\n                    {emoji} {name}\r\n                </button>\r\n            ))}\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction getPresetEmoji(key: string): string {\r\n    switch (key) {\r\n        case 'academic': return '';\r\n        case 'cyberpunk': return '';\r\n        case 'kid': return '';\r\n        case 'cozy': return '';\r\n        default: return '';\r\n    }\r\n}\r\n","'use client';\r\n\r\nimport { useChameleon } from './ChameleonRoot';\r\n\r\ninterface ReadingMode {\r\n    id: string;\r\n    label: string;\r\n    icon: string;\r\n    description: string;\r\n    vibeDescription: string; // What to send to AI\r\n}\r\n\r\nconst READING_MODES: ReadingMode[] = [\r\n    {\r\n        id: 'simple',\r\n        label: 'Simple',\r\n        icon: '',\r\n        description: 'Easy to understand',\r\n        vibeDescription: 'Make this extremely simple and easy to understand, like explaining to a curious 8-year-old. Use short sentences, fun analogies, and emojis.',\r\n    },\r\n    {\r\n        id: 'expert',\r\n        label: 'Expert',\r\n        icon: '',\r\n        description: 'Full technical details',\r\n        vibeDescription: 'Make this technical and expert-level. Use precise terminology, include implementation details, and assume the reader is a senior developer.',\r\n    },\r\n    {\r\n        id: 'visual',\r\n        label: 'Visual',\r\n        icon: '',\r\n        description: 'More diagrams & visuals',\r\n        vibeDescription: 'Make this visual and scannable. Use bullet points, highlight key concepts, suggest diagrams, and use a modern vibrant aesthetic.',\r\n    },\r\n];\r\n\r\ninterface ReadingModeSelectorProps {\r\n    onSelect?: () => void;\r\n}\r\n\r\n/**\r\n * ReadingModeSelector - The preset reading mode buttons\r\n * \r\n * [ Simple] [ Expert] [ Visual]\r\n */\r\nexport function ReadingModeSelector({ onSelect }: ReadingModeSelectorProps) {\r\n    const { vibe, setVibe, isLoading } = useChameleon();\r\n\r\n    const handleSelect = async (mode: ReadingMode) => {\r\n        await setVibe(mode.vibeDescription);\r\n        onSelect?.();\r\n    };\r\n\r\n    // Determine which mode is currently active based on vibe tone\r\n    const getActiveMode = () => {\r\n        if (vibe.voice.tone === 'simplified') return 'simple';\r\n        if (vibe.voice.tone === 'technical') return 'expert';\r\n        if (vibe.layout.style === 'hero') return 'visual';\r\n        return null;\r\n    };\r\n\r\n    const activeMode = getActiveMode();\r\n\r\n    return (\r\n        <div\r\n            className=\"reading-mode-selector\"\r\n            style={{\r\n                display: 'grid',\r\n                gridTemplateColumns: 'repeat(3, 1fr)',\r\n                gap: '8px',\r\n            }}\r\n        >\r\n            {READING_MODES.map((mode) => {\r\n                const isActive = activeMode === mode.id;\r\n\r\n                return (\r\n                    <button\r\n                        key={mode.id}\r\n                        onClick={() => handleSelect(mode)}\r\n                        disabled={isLoading}\r\n                        className=\"reading-mode-btn\"\r\n                        style={{\r\n                            display: 'flex',\r\n                            flexDirection: 'column',\r\n                            alignItems: 'center',\r\n                            gap: '4px',\r\n                            padding: '12px 8px',\r\n                            border: isActive\r\n                                ? `2px solid ${vibe.colors.primary}`\r\n                                : '2px solid rgba(128, 128, 128, 0.2)',\r\n                            borderRadius: '8px',\r\n                            background: isActive\r\n                                ? `${vibe.colors.primary}15`\r\n                                : 'transparent',\r\n                            cursor: isLoading ? 'wait' : 'pointer',\r\n                            transition: 'all 150ms ease',\r\n                            opacity: isLoading ? 0.5 : 1,\r\n                        }}\r\n                        onMouseEnter={(e) => {\r\n                            if (!isActive && !isLoading) {\r\n                                e.currentTarget.style.background = 'rgba(128, 128, 128, 0.05)';\r\n                                e.currentTarget.style.borderColor = vibe.colors.primary;\r\n                            }\r\n                        }}\r\n                        onMouseLeave={(e) => {\r\n                            if (!isActive) {\r\n                                e.currentTarget.style.background = 'transparent';\r\n                                e.currentTarget.style.borderColor = 'rgba(128, 128, 128, 0.2)';\r\n                            }\r\n                        }}\r\n                    >\r\n                        <span style={{ fontSize: '24px' }}>{mode.icon}</span>\r\n                        <span style={{\r\n                            fontSize: '14px',\r\n                            fontWeight: 600,\r\n                            color: 'var(--chameleon-text, #1a1a2e)'\r\n                        }}>\r\n                            {mode.label}\r\n                        </span>\r\n                        <span style={{\r\n                            fontSize: '11px',\r\n                            opacity: 0.6,\r\n                            textAlign: 'center'\r\n                        }}>\r\n                            {mode.description}\r\n                        </span>\r\n                    </button>\r\n                );\r\n            })}\r\n        </div>\r\n    );\r\n}\r\n","'use client';\r\n\r\nimport { useState, FormEvent } from 'react';\r\nimport { useChameleon } from './ChameleonRoot';\r\n\r\ninterface CustomVibeInputProps {\r\n    onSubmit?: () => void;\r\n}\r\n\r\nconst EXAMPLE_PLACEHOLDERS = [\r\n    'Explain like I\\'m a gamer...',\r\n    'Make it feel like a cozy cabin...',\r\n    'I\\'m a 5 year old who loves dinosaurs...',\r\n    'Think cyberpunk hacker vibes...',\r\n    'Make it professional for my boss...',\r\n];\r\n\r\n/**\r\n * CustomVibeInput - Free text input for custom vibes\r\n * \r\n * \"Explain like I'm a gamer...\"  AI generates matching theme + content\r\n */\r\nexport function CustomVibeInput({ onSubmit }: CustomVibeInputProps) {\r\n    const [value, setValue] = useState('');\r\n    const [placeholder] = useState(() =>\r\n        EXAMPLE_PLACEHOLDERS[Math.floor(Math.random() * EXAMPLE_PLACEHOLDERS.length)]\r\n    );\r\n    const { setVibe, isLoading, vibe } = useChameleon();\r\n\r\n    const handleSubmit = async (e: FormEvent) => {\r\n        e.preventDefault();\r\n        if (!value.trim() || isLoading) return;\r\n\r\n        await setVibe(value.trim());\r\n        setValue('');\r\n        onSubmit?.();\r\n    };\r\n\r\n    return (\r\n        <form onSubmit={handleSubmit} className=\"custom-vibe-input\">\r\n            <div style={{\r\n                display: 'flex',\r\n                gap: '8px',\r\n            }}>\r\n                <input\r\n                    type=\"text\"\r\n                    value={value}\r\n                    onChange={(e) => setValue(e.target.value)}\r\n                    placeholder={placeholder}\r\n                    disabled={isLoading}\r\n                    style={{\r\n                        flex: 1,\r\n                        padding: '10px 14px',\r\n                        fontSize: '14px',\r\n                        border: '2px solid rgba(128, 128, 128, 0.2)',\r\n                        borderRadius: '8px',\r\n                        background: 'transparent',\r\n                        color: 'var(--chameleon-text, #1a1a2e)',\r\n                        outline: 'none',\r\n                        transition: 'border-color 150ms ease',\r\n                    }}\r\n                    onFocus={(e) => {\r\n                        e.currentTarget.style.borderColor = vibe.colors.primary;\r\n                    }}\r\n                    onBlur={(e) => {\r\n                        e.currentTarget.style.borderColor = 'rgba(128, 128, 128, 0.2)';\r\n                    }}\r\n                />\r\n                <button\r\n                    type=\"submit\"\r\n                    disabled={!value.trim() || isLoading}\r\n                    style={{\r\n                        padding: '10px 16px',\r\n                        fontSize: '14px',\r\n                        fontWeight: 600,\r\n                        border: 'none',\r\n                        borderRadius: '8px',\r\n                        background: vibe.colors.primary,\r\n                        color: vibe.colors.background,\r\n                        cursor: (!value.trim() || isLoading) ? 'not-allowed' : 'pointer',\r\n                        opacity: (!value.trim() || isLoading) ? 0.5 : 1,\r\n                        transition: 'all 150ms ease',\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        gap: '4px',\r\n                    }}\r\n                >\r\n                    <span>Apply</span>\r\n                    <span></span>\r\n                </button>\r\n            </div>\r\n\r\n            {/* Quick suggestions */}\r\n            <div style={{\r\n                display: 'flex',\r\n                flexWrap: 'wrap',\r\n                gap: '6px',\r\n                marginTop: '10px',\r\n            }}>\r\n                {[' Gamer', ' Kid', ' Pro', ' Cozy'].map((suggestion) => (\r\n                    <button\r\n                        key={suggestion}\r\n                        type=\"button\"\r\n                        onClick={() => setValue(suggestion.slice(2))}\r\n                        disabled={isLoading}\r\n                        style={{\r\n                            padding: '4px 10px',\r\n                            fontSize: '12px',\r\n                            border: '1px solid rgba(128, 128, 128, 0.2)',\r\n                            borderRadius: '16px',\r\n                            background: 'transparent',\r\n                            cursor: 'pointer',\r\n                            opacity: isLoading ? 0.5 : 1,\r\n                            transition: 'all 100ms ease',\r\n                        }}\r\n                        onMouseEnter={(e) => {\r\n                            e.currentTarget.style.background = 'rgba(128, 128, 128, 0.1)';\r\n                        }}\r\n                        onMouseLeave={(e) => {\r\n                            e.currentTarget.style.background = 'transparent';\r\n                        }}\r\n                    >\r\n                        {suggestion}\r\n                    </button>\r\n                ))}\r\n            </div>\r\n        </form>\r\n    );\r\n}\r\n","'use client';\r\n\r\nimport { useState, useEffect, type ReactNode } from 'react';\r\n\r\ninterface ThinkingStep {\r\n    id: string;\r\n    message: string;\r\n    status: 'thinking' | 'complete' | 'error';\r\n    icon?: string;\r\n}\r\n\r\ninterface ThinkingBubbleProps {\r\n    /** Whether the thinking animation is active */\r\n    isThinking: boolean;\r\n    /** Thinking steps to display */\r\n    steps?: ThinkingStep[];\r\n    /** Auto-generate thinking steps based on vibe type */\r\n    vibeType?: 'style' | 'content' | 'both';\r\n    /** Custom thinking messages */\r\n    messages?: string[];\r\n    /** Duration before showing each step (ms) */\r\n    stepDelay?: number;\r\n    /** Children to render after thinking completes */\r\n    children?: ReactNode;\r\n    /** Custom class name */\r\n    className?: string;\r\n}\r\n\r\n// Pre-defined thinking messages for different vibe types\r\nconst THINKING_MESSAGES = {\r\n    style: [\r\n        { message: 'Analyzing visual requirements...', icon: '' },\r\n        { message: 'Selecting color palette...', icon: '' },\r\n        { message: 'Choosing typography...', icon: '' },\r\n        { message: 'Optimizing layout...', icon: '' },\r\n        { message: 'Applying theme...', icon: '' },\r\n    ],\r\n    content: [\r\n        { message: 'Understanding context...', icon: '' },\r\n        { message: 'Analyzing tone requirements...', icon: '' },\r\n        { message: 'Adapting vocabulary...', icon: '' },\r\n        { message: 'Restructuring content...', icon: '' },\r\n        { message: 'Finalizing text...', icon: '' },\r\n    ],\r\n    both: [\r\n        { message: 'Analyzing your vibe...', icon: '' },\r\n        { message: 'Understanding your preferences...', icon: '' },\r\n        { message: 'Generating color palette...', icon: '' },\r\n        { message: 'Selecting typography...', icon: '' },\r\n        { message: 'Adapting content style...', icon: '' },\r\n        { message: 'Optimizing layout...', icon: '' },\r\n        { message: 'Morphing complete!', icon: '' },\r\n    ],\r\n};\r\n\r\n/**\r\n * ThinkingBubble - Shows AI reasoning in real-time\r\n * \r\n * \"The Magic Moment\" - Users see the AI thinking, making it feel alive\r\n */\r\nexport function ThinkingBubble({\r\n    isThinking,\r\n    steps,\r\n    vibeType = 'both',\r\n    messages,\r\n    stepDelay = 600,\r\n    children,\r\n    className = '',\r\n}: ThinkingBubbleProps) {\r\n    const [visibleSteps, setVisibleSteps] = useState<ThinkingStep[]>([]);\r\n    const [currentIndex, setCurrentIndex] = useState(0);\r\n\r\n    // Generate steps from messages or use pre-defined\r\n    const thinkingSteps: ThinkingStep[] = steps ||\r\n        (messages || THINKING_MESSAGES[vibeType]).map((item, i) => ({\r\n            id: `step-${i}`,\r\n            message: typeof item === 'string' ? item : item.message,\r\n            icon: typeof item === 'string' ? '' : item.icon || '',\r\n            status: 'thinking' as const,\r\n        }));\r\n\r\n    // Animate steps appearing one by one\r\n    useEffect(() => {\r\n        if (!isThinking) {\r\n            setVisibleSteps([]);\r\n            setCurrentIndex(0);\r\n            return;\r\n        }\r\n\r\n        if (currentIndex >= thinkingSteps.length) return;\r\n\r\n        const timer = setTimeout(() => {\r\n            setVisibleSteps(prev => {\r\n                const newSteps = [...prev];\r\n                // Mark previous step as complete\r\n                if (newSteps.length > 0) {\r\n                    newSteps[newSteps.length - 1] = {\r\n                        ...newSteps[newSteps.length - 1],\r\n                        status: 'complete',\r\n                    };\r\n                }\r\n                // Add new step\r\n                return [...newSteps, thinkingSteps[currentIndex]];\r\n            });\r\n            setCurrentIndex(prev => prev + 1);\r\n        }, currentIndex === 0 ? 100 : stepDelay);\r\n\r\n        return () => clearTimeout(timer);\r\n    }, [isThinking, currentIndex, stepDelay, thinkingSteps]);\r\n\r\n    if (!isThinking && !visibleSteps.length) {\r\n        return <>{children}</>;\r\n    }\r\n\r\n    return (\r\n        <div className={`thinking-bubble ${className}`}>\r\n            <div\r\n                style={{\r\n                    background: 'rgba(128, 128, 128, 0.05)',\r\n                    borderRadius: '12px',\r\n                    padding: '16px',\r\n                    marginBottom: '16px',\r\n                }}\r\n            >\r\n                <div\r\n                    style={{\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        gap: '8px',\r\n                        marginBottom: '12px',\r\n                    }}\r\n                >\r\n                    <span className=\"thinking-pulse\" style={{ fontSize: '20px' }}>\r\n                        \r\n                    </span>\r\n                    <span style={{ fontWeight: 600, fontSize: '14px' }}>\r\n                        Chameleon is thinking...\r\n                    </span>\r\n                </div>\r\n\r\n                <div style={{ display: 'flex', flexDirection: 'column', gap: '8px' }}>\r\n                    {visibleSteps.map((step, index) => (\r\n                        <div\r\n                            key={step.id}\r\n                            style={{\r\n                                display: 'flex',\r\n                                alignItems: 'center',\r\n                                gap: '10px',\r\n                                paddingLeft: '8px',\r\n                                animation: 'thinkingStepFadeIn 300ms ease-out',\r\n                            }}\r\n                        >\r\n                            <span style={{ fontSize: '16px' }}>\r\n                                {step.status === 'complete' ? '' : step.icon}\r\n                            </span>\r\n                            <span\r\n                                style={{\r\n                                    fontSize: '14px',\r\n                                    opacity: step.status === 'complete' ? 0.7 : 1,\r\n                                    textDecoration: step.status === 'complete' ? 'line-through' : 'none',\r\n                                }}\r\n                            >\r\n                                {step.message}\r\n                            </span>\r\n                            {step.status === 'thinking' && index === visibleSteps.length - 1 && (\r\n                                <span className=\"thinking-dots\">\r\n                                    <span className=\"dot\">.</span>\r\n                                    <span className=\"dot\">.</span>\r\n                                    <span className=\"dot\">.</span>\r\n                                </span>\r\n                            )}\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Render children with fade when thinking completes */}\r\n            {!isThinking && children && (\r\n                <div style={{ animation: 'thinkingContentFadeIn 500ms ease-out' }}>\r\n                    {children}\r\n                </div>\r\n            )}\r\n\r\n            <style jsx global>{`\r\n                @keyframes thinkingStepFadeIn {\r\n                    from {\r\n                        opacity: 0;\r\n                        transform: translateX(-10px);\r\n                    }\r\n                    to {\r\n                        opacity: 1;\r\n                        transform: translateX(0);\r\n                    }\r\n                }\r\n\r\n                @keyframes thinkingContentFadeIn {\r\n                    from {\r\n                        opacity: 0;\r\n                        transform: translateY(10px);\r\n                    }\r\n                    to {\r\n                        opacity: 1;\r\n                        transform: translateY(0);\r\n                    }\r\n                }\r\n\r\n                .thinking-pulse {\r\n                    animation: pulse 1.5s infinite;\r\n                }\r\n\r\n                @keyframes pulse {\r\n                    0%, 100% { opacity: 1; }\r\n                    50% { opacity: 0.5; }\r\n                }\r\n\r\n                .thinking-dots {\r\n                    display: inline-flex;\r\n                    margin-left: 4px;\r\n                }\r\n\r\n                .thinking-dots .dot {\r\n                    animation: dotBlink 1.4s infinite;\r\n                    opacity: 0;\r\n                }\r\n\r\n                .thinking-dots .dot:nth-child(1) {\r\n                    animation-delay: 0s;\r\n                }\r\n\r\n                .thinking-dots .dot:nth-child(2) {\r\n                    animation-delay: 0.2s;\r\n                }\r\n\r\n                .thinking-dots .dot:nth-child(3) {\r\n                    animation-delay: 0.4s;\r\n                }\r\n\r\n                @keyframes dotBlink {\r\n                    0%, 20%, 100% { opacity: 0; }\r\n                    40%, 80% { opacity: 1; }\r\n                }\r\n            `}</style>\r\n        </div>\r\n    );\r\n}\r\n\r\n/**\r\n * useThinkingState - Hook to manage thinking state with auto-clear\r\n */\r\nexport function useThinkingState(duration: number = 3000) {\r\n    const [isThinking, setIsThinking] = useState(false);\r\n\r\n    const startThinking = () => {\r\n        setIsThinking(true);\r\n    };\r\n\r\n    const stopThinking = () => {\r\n        setIsThinking(false);\r\n    };\r\n\r\n    // Auto-stop after duration (for demo purposes)\r\n    useEffect(() => {\r\n        if (isThinking) {\r\n            const timer = setTimeout(() => setIsThinking(false), duration);\r\n            return () => clearTimeout(timer);\r\n        }\r\n    }, [isThinking, duration]);\r\n\r\n    return { isThinking, startThinking, stopThinking };\r\n}\r\n","'use client';\r\n\r\nimport { useRef, useEffect, RefObject } from 'react';\r\nimport { useChameleon } from './ChameleonRoot';\r\nimport { ReadingModeSelector } from './ReadingModeSelector';\r\nimport { CustomVibeInput } from './CustomVibeInput';\r\nimport { ThinkingBubble } from './ThinkingBubble';\r\n\r\ninterface VibePopoverProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    anchorRef: RefObject<HTMLElement | null>;\r\n}\r\n\r\n/**\r\n * VibePopover - The popup menu when user clicks the Chameleon icon\r\n * \r\n * Contains:\r\n * - Reading mode buttons (Simple / Expert / Visual)\r\n * - Custom text input (\"Explain like I'm a...\")\r\n * - Visible AI thinking animation\r\n * - Screenshot upload zone (future)\r\n * - Voice input button (future)\r\n */\r\nexport function VibePopover({ isOpen, onClose, anchorRef }: VibePopoverProps) {\r\n    const popoverRef = useRef<HTMLDivElement>(null);\r\n    const { vibe, isLoading } = useChameleon();\r\n\r\n    // Close on click outside\r\n    useEffect(() => {\r\n        const handleClickOutside = (e: MouseEvent) => {\r\n            if (\r\n                popoverRef.current &&\r\n                !popoverRef.current.contains(e.target as Node) &&\r\n                anchorRef.current &&\r\n                !anchorRef.current.contains(e.target as Node)\r\n            ) {\r\n                onClose();\r\n            }\r\n        };\r\n\r\n        if (isOpen) {\r\n            document.addEventListener('mousedown', handleClickOutside);\r\n        }\r\n        return () => document.removeEventListener('mousedown', handleClickOutside);\r\n    }, [isOpen, onClose, anchorRef]);\r\n\r\n    if (!isOpen) return null;\r\n\r\n    return (\r\n        <div\r\n            ref={popoverRef}\r\n            className=\"vibe-popover\"\r\n            role=\"dialog\"\r\n            aria-label=\"Choose your reading mode\"\r\n            style={{\r\n                position: 'absolute',\r\n                top: 'calc(100% + 8px)',\r\n                right: 0,\r\n                width: '340px',\r\n                background: 'var(--chameleon-bg, #ffffff)',\r\n                border: '1px solid rgba(128, 128, 128, 0.2)',\r\n                borderRadius: '12px',\r\n                boxShadow: '0 10px 40px rgba(0, 0, 0, 0.15)',\r\n                padding: '16px',\r\n                zIndex: 1000,\r\n                animation: 'popoverSlideIn 200ms ease-out',\r\n            }}\r\n        >\r\n            {/* Show thinking bubble when loading */}\r\n            {isLoading ? (\r\n                <ThinkingBubble\r\n                    isThinking={true}\r\n                    vibeType=\"both\"\r\n                    stepDelay={500}\r\n                />\r\n            ) : (\r\n                <>\r\n                    {/* Header */}\r\n                    <div style={{\r\n                        marginBottom: '16px',\r\n                        textAlign: 'center'\r\n                    }}>\r\n                        <h3 style={{\r\n                            margin: 0,\r\n                            fontSize: '16px',\r\n                            fontWeight: 600,\r\n                            color: 'var(--chameleon-text, #1a1a2e)'\r\n                        }}>\r\n                             How do you want to read this?\r\n                        </h3>\r\n                        {vibe.themeName !== 'Academic' && (\r\n                            <p style={{\r\n                                margin: '4px 0 0',\r\n                                fontSize: '12px',\r\n                                opacity: 0.6\r\n                            }}>\r\n                                Current: {vibe.themeName}\r\n                            </p>\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* Reading Mode Buttons */}\r\n                    <ReadingModeSelector onSelect={onClose} />\r\n\r\n                    {/* Divider */}\r\n                    <div style={{\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        margin: '16px 0',\r\n                        gap: '12px'\r\n                    }}>\r\n                        <div style={{ flex: 1, height: '1px', background: 'rgba(128, 128, 128, 0.2)' }} />\r\n                        <span style={{ fontSize: '12px', opacity: 0.5 }}>or</span>\r\n                        <div style={{ flex: 1, height: '1px', background: 'rgba(128, 128, 128, 0.2)' }} />\r\n                    </div>\r\n\r\n                    {/* Custom Input */}\r\n                    <CustomVibeInput onSubmit={onClose} />\r\n                </>\r\n            )}\r\n\r\n            {/* CSS Animation */}\r\n            <style jsx global>{`\r\n                @keyframes popoverSlideIn {\r\n                    from {\r\n                        opacity: 0;\r\n                        transform: translateY(-8px);\r\n                    }\r\n                    to {\r\n                        opacity: 1;\r\n                        transform: translateY(0);\r\n                    }\r\n                }\r\n            `}</style>\r\n        </div>\r\n    );\r\n}\r\n\r\n","'use client';\r\n\r\nimport { useState, useRef, useEffect } from 'react';\r\nimport { useChameleon } from './ChameleonRoot';\r\nimport { VibePopover } from './VibePopover';\r\n\r\ninterface ChameleonWidgetProps {\r\n    /** Position hint for styling */\r\n    position?: 'navbar' | 'floating' | 'inline';\r\n    /** Custom class name */\r\n    className?: string;\r\n}\r\n\r\n/**\r\n * ChameleonWidget - The main entry point for the Chameleon SDK\r\n * \r\n * A small  icon that sits in the navbar (like a dark mode toggle).\r\n * Click to open the Vibe Popover with reading mode options.\r\n */\r\nexport function ChameleonWidget({\r\n    position = 'navbar',\r\n    className = ''\r\n}: ChameleonWidgetProps) {\r\n    const [isOpen, setIsOpen] = useState(false);\r\n    const buttonRef = useRef<HTMLButtonElement>(null);\r\n    const { vibe, isLoading } = useChameleon();\r\n\r\n    // Close on escape key\r\n    useEffect(() => {\r\n        const handleKeyDown = (e: KeyboardEvent) => {\r\n            if (e.key === 'Escape' && isOpen) {\r\n                setIsOpen(false);\r\n            }\r\n        };\r\n        document.addEventListener('keydown', handleKeyDown);\r\n        return () => document.removeEventListener('keydown', handleKeyDown);\r\n    }, [isOpen]);\r\n\r\n    const positionClasses = {\r\n        navbar: 'relative',\r\n        floating: 'fixed bottom-4 right-4 z-50',\r\n        inline: 'inline-block',\r\n    };\r\n\r\n    return (\r\n        <div className={`chameleon-widget ${positionClasses[position]} ${className}`}>\r\n            <button\r\n                ref={buttonRef}\r\n                onClick={() => setIsOpen(!isOpen)}\r\n                className=\"chameleon-trigger\"\r\n                aria-label=\"Open Chameleon vibe selector\"\r\n                aria-expanded={isOpen}\r\n                aria-haspopup=\"dialog\"\r\n                style={{\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'center',\r\n                    width: '40px',\r\n                    height: '40px',\r\n                    borderRadius: '8px',\r\n                    border: '1px solid rgba(128, 128, 128, 0.2)',\r\n                    background: isOpen ? 'rgba(128, 128, 128, 0.1)' : 'transparent',\r\n                    cursor: 'pointer',\r\n                    transition: 'all 150ms ease',\r\n                    fontSize: '20px',\r\n                }}\r\n                onMouseEnter={(e) => {\r\n                    e.currentTarget.style.background = 'rgba(128, 128, 128, 0.1)';\r\n                }}\r\n                onMouseLeave={(e) => {\r\n                    if (!isOpen) {\r\n                        e.currentTarget.style.background = 'transparent';\r\n                    }\r\n                }}\r\n            >\r\n                <span className={isLoading ? 'animate-pulse' : ''}>\r\n                    \r\n                </span>\r\n            </button>\r\n\r\n            {/* Current vibe indicator */}\r\n            {vibe.themeName !== 'Academic' && (\r\n                <span\r\n                    className=\"chameleon-badge\"\r\n                    style={{\r\n                        position: 'absolute',\r\n                        top: '-4px',\r\n                        right: '-4px',\r\n                        width: '12px',\r\n                        height: '12px',\r\n                        borderRadius: '50%',\r\n                        background: vibe.colors.primary,\r\n                        border: '2px solid var(--chameleon-bg, white)',\r\n                    }}\r\n                    title={`Current vibe: ${vibe.themeName}`}\r\n                />\r\n            )}\r\n\r\n            {/* Popover */}\r\n            <VibePopover\r\n                isOpen={isOpen}\r\n                onClose={() => setIsOpen(false)}\r\n                anchorRef={buttonRef}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n","'use client';\r\n\r\nimport { type ReactNode, type CSSProperties } from 'react';\r\n\r\ninterface SkeletonMorphProps {\r\n    /** Type of skeleton to render */\r\n    type?: 'text' | 'heading' | 'paragraph' | 'card' | 'button' | 'image';\r\n    /** Width of the skeleton (CSS value) */\r\n    width?: string;\r\n    /** Height of the skeleton (CSS value) */\r\n    height?: string;\r\n    /** Number of lines for paragraph type */\r\n    lines?: number;\r\n    /** Custom class name */\r\n    className?: string;\r\n    /** Custom styles */\r\n    style?: CSSProperties;\r\n    /** Whether to show the shimmer animation */\r\n    animate?: boolean;\r\n    /** Children to wrap - if loading is false, show children */\r\n    children?: ReactNode;\r\n    /** Loading state */\r\n    isLoading?: boolean;\r\n}\r\n\r\n/**\r\n * SkeletonMorph - Loading shimmer component for the Chameleon SDK\r\n * \r\n * Shows elegant loading states while AI morphs the content.\r\n */\r\nexport function SkeletonMorph({\r\n    type = 'text',\r\n    width,\r\n    height,\r\n    lines = 3,\r\n    className = '',\r\n    style = {},\r\n    animate = true,\r\n    children,\r\n    isLoading = true,\r\n}: SkeletonMorphProps) {\r\n    // If not loading and has children, render children\r\n    if (!isLoading && children) {\r\n        return <>{children}</>;\r\n    }\r\n\r\n    const baseStyle: CSSProperties = {\r\n        background: 'linear-gradient(90deg, rgba(128, 128, 128, 0.1) 25%, rgba(128, 128, 128, 0.2) 50%, rgba(128, 128, 128, 0.1) 75%)',\r\n        backgroundSize: '200% 100%',\r\n        animation: animate ? 'skeletonShimmer 1.5s infinite' : 'none',\r\n        borderRadius: '4px',\r\n        ...style,\r\n    };\r\n\r\n    const renderSkeleton = () => {\r\n        switch (type) {\r\n            case 'heading':\r\n                return (\r\n                    <div\r\n                        className={`skeleton-heading ${className}`}\r\n                        style={{\r\n                            ...baseStyle,\r\n                            width: width || '70%',\r\n                            height: height || '32px',\r\n                        }}\r\n                    />\r\n                );\r\n\r\n            case 'paragraph':\r\n                return (\r\n                    <div className={`skeleton-paragraph ${className}`} style={{ display: 'flex', flexDirection: 'column', gap: '8px' }}>\r\n                        {Array.from({ length: lines }).map((_, i) => (\r\n                            <div\r\n                                key={i}\r\n                                style={{\r\n                                    ...baseStyle,\r\n                                    width: i === lines - 1 ? '60%' : '100%',\r\n                                    height: height || '16px',\r\n                                }}\r\n                            />\r\n                        ))}\r\n                    </div>\r\n                );\r\n\r\n            case 'card':\r\n                return (\r\n                    <div\r\n                        className={`skeleton-card ${className}`}\r\n                        style={{\r\n                            ...baseStyle,\r\n                            width: width || '100%',\r\n                            height: height || '200px',\r\n                            borderRadius: '12px',\r\n                        }}\r\n                    />\r\n                );\r\n\r\n            case 'button':\r\n                return (\r\n                    <div\r\n                        className={`skeleton-button ${className}`}\r\n                        style={{\r\n                            ...baseStyle,\r\n                            width: width || '120px',\r\n                            height: height || '40px',\r\n                            borderRadius: '8px',\r\n                        }}\r\n                    />\r\n                );\r\n\r\n            case 'image':\r\n                return (\r\n                    <div\r\n                        className={`skeleton-image ${className}`}\r\n                        style={{\r\n                            ...baseStyle,\r\n                            width: width || '100%',\r\n                            height: height || '160px',\r\n                            borderRadius: '8px',\r\n                        }}\r\n                    />\r\n                );\r\n\r\n            case 'text':\r\n            default:\r\n                return (\r\n                    <span\r\n                        className={`skeleton-text ${className}`}\r\n                        style={{\r\n                            ...baseStyle,\r\n                            display: 'inline-block',\r\n                            width: width || '100px',\r\n                            height: height || '16px',\r\n                        }}\r\n                    />\r\n                );\r\n        }\r\n    };\r\n\r\n    return (\r\n        <>\r\n            {renderSkeleton()}\r\n            <style jsx global>{`\r\n                @keyframes skeletonShimmer {\r\n                    0% { background-position: 200% 0; }\r\n                    100% { background-position: -200% 0; }\r\n                }\r\n            `}</style>\r\n        </>\r\n    );\r\n}\r\n\r\n/**\r\n * SkeletonMorphContent - A wrapper for content that morphs with loading state\r\n */\r\nexport function SkeletonMorphContent({\r\n    isLoading,\r\n    children,\r\n    fallback,\r\n}: {\r\n    isLoading: boolean;\r\n    children: ReactNode;\r\n    fallback?: ReactNode;\r\n}) {\r\n    if (isLoading) {\r\n        return (\r\n            <div className=\"skeleton-morph-content\" style={{\r\n                position: 'relative',\r\n                opacity: 0.6,\r\n                pointerEvents: 'none',\r\n            }}>\r\n                {fallback || (\r\n                    <div style={{ display: 'flex', flexDirection: 'column', gap: '16px' }}>\r\n                        <SkeletonMorph type=\"heading\" />\r\n                        <SkeletonMorph type=\"paragraph\" lines={4} />\r\n                    </div>\r\n                )}\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return <>{children}</>;\r\n}\r\n","'use client';\r\n\r\nimport { useState, useRef, useCallback, DragEvent, ChangeEvent, ClipboardEvent } from 'react';\r\nimport { useChameleon } from './ChameleonRoot';\r\nimport { ThinkingBubble } from './ThinkingBubble';\r\n\r\ninterface VibeCaptureProps {\r\n    /** Callback when image is processed */\r\n    onCapture?: (imageData: string) => void;\r\n    /** Callback to close popover after success */\r\n    onClose?: () => void;\r\n    /** Custom class name */\r\n    className?: string;\r\n}\r\n\r\n// Thinking messages for screenshot analysis\r\nconst SCREENSHOT_THINKING = [\r\n    { message: 'Analyzing screenshot...', icon: '' },\r\n    { message: 'Detecting color palette...', icon: '' },\r\n    { message: 'Identifying typography style...', icon: '' },\r\n    { message: 'Extracting layout patterns...', icon: '' },\r\n    { message: 'Detecting visual effects...', icon: '' },\r\n    { message: 'Generating matching vibe...', icon: '' },\r\n];\r\n\r\n/**\r\n * VibeCapture - Screenshot-to-Vibe Component\r\n * \r\n * Drop or paste a screenshot  AI extracts the design language\r\n * Uses Gemini's Agentic Vision capabilities\r\n */\r\nexport function VibeCapture({ onCapture, onClose, className = '' }: VibeCaptureProps) {\r\n    const [isDragging, setIsDragging] = useState(false);\r\n    const [isProcessing, setIsProcessing] = useState(false);\r\n    const [preview, setPreview] = useState<string | null>(null);\r\n    const [error, setError] = useState<string | null>(null);\r\n    const fileInputRef = useRef<HTMLInputElement>(null);\r\n    const { setVibe } = useChameleon();\r\n\r\n    // Handle file selection\r\n    const processImage = useCallback(async (file: File) => {\r\n        if (!file.type.startsWith('image/')) {\r\n            setError('Please upload an image file');\r\n            return;\r\n        }\r\n\r\n        // Create preview\r\n        const reader = new FileReader();\r\n        reader.onload = (e) => {\r\n            const dataUrl = e.target?.result as string;\r\n            setPreview(dataUrl);\r\n        };\r\n        reader.readAsDataURL(file);\r\n\r\n        setIsProcessing(true);\r\n        setError(null);\r\n\r\n        try {\r\n            // Convert to base64\r\n            const base64 = await new Promise<string>((resolve, reject) => {\r\n                const reader = new FileReader();\r\n                reader.onload = () => {\r\n                    const result = reader.result as string;\r\n                    // Extract base64 data (remove data:image/xxx;base64, prefix)\r\n                    const base64Data = result.split(',')[1];\r\n                    resolve(base64Data);\r\n                };\r\n                reader.onerror = reject;\r\n                reader.readAsDataURL(file);\r\n            });\r\n\r\n            // Send to API for analysis\r\n            const response = await fetch('/api/chameleon/analyze-image', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    image: base64,\r\n                    mimeType: file.type,\r\n                }),\r\n            });\r\n\r\n            if (!response.ok) {\r\n                throw new Error('Failed to analyze image');\r\n            }\r\n\r\n            const data = await response.json();\r\n\r\n            // Apply the extracted vibe\r\n            if (data.vibe) {\r\n                // Use the description to generate a proper vibe\r\n                await setVibe(`Clone the style of this design: ${data.description || 'modern clean interface'}`);\r\n                onCapture?.(base64);\r\n                onClose?.();\r\n            }\r\n        } catch (err) {\r\n            console.error('Screenshot analysis failed:', err);\r\n            setError('Failed to analyze screenshot. Please try again.');\r\n        } finally {\r\n            setIsProcessing(false);\r\n        }\r\n    }, [setVibe, onCapture, onClose]);\r\n\r\n    // Drag and drop handlers\r\n    const handleDragEnter = (e: DragEvent) => {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        setIsDragging(true);\r\n    };\r\n\r\n    const handleDragLeave = (e: DragEvent) => {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        setIsDragging(false);\r\n    };\r\n\r\n    const handleDragOver = (e: DragEvent) => {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n    };\r\n\r\n    const handleDrop = (e: DragEvent) => {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        setIsDragging(false);\r\n\r\n        const files = e.dataTransfer.files;\r\n        if (files.length > 0) {\r\n            processImage(files[0]);\r\n        }\r\n    };\r\n\r\n    // File input handler\r\n    const handleFileChange = (e: ChangeEvent<HTMLInputElement>) => {\r\n        const files = e.target.files;\r\n        if (files && files.length > 0) {\r\n            processImage(files[0]);\r\n        }\r\n    };\r\n\r\n    // Paste handler (for Cmd+V / Ctrl+V)\r\n    const handlePaste = useCallback((e: ClipboardEvent) => {\r\n        const items = e.clipboardData.items;\r\n        for (let i = 0; i < items.length; i++) {\r\n            if (items[i].type.startsWith('image/')) {\r\n                const file = items[i].getAsFile();\r\n                if (file) {\r\n                    processImage(file);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }, [processImage]);\r\n\r\n    // Show thinking bubble while processing\r\n    if (isProcessing) {\r\n        return (\r\n            <div className={`vibe-capture ${className}`}>\r\n                <ThinkingBubble\r\n                    isThinking={true}\r\n                    vibeType=\"style\"\r\n                    stepDelay={700}\r\n                />\r\n                {preview && (\r\n                    <div style={{\r\n                        marginTop: '12px',\r\n                        borderRadius: '8px',\r\n                        overflow: 'hidden',\r\n                        opacity: 0.6,\r\n                    }}>\r\n                        <img\r\n                            src={preview}\r\n                            alt=\"Analyzing...\"\r\n                            style={{\r\n                                width: '100%',\r\n                                height: 'auto',\r\n                                maxHeight: '150px',\r\n                                objectFit: 'cover',\r\n                            }}\r\n                        />\r\n                    </div>\r\n                )}\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div\r\n            className={`vibe-capture ${className}`}\r\n            onPaste={handlePaste}\r\n            tabIndex={0}\r\n        >\r\n            <div\r\n                onClick={() => fileInputRef.current?.click()}\r\n                onDragEnter={handleDragEnter}\r\n                onDragLeave={handleDragLeave}\r\n                onDragOver={handleDragOver}\r\n                onDrop={handleDrop}\r\n                style={{\r\n                    border: `2px dashed ${isDragging ? 'var(--chameleon-primary, #4a90d9)' : 'rgba(128, 128, 128, 0.3)'}`,\r\n                    borderRadius: '12px',\r\n                    padding: '24px',\r\n                    textAlign: 'center',\r\n                    cursor: 'pointer',\r\n                    background: isDragging ? 'rgba(74, 144, 217, 0.05)' : 'transparent',\r\n                    transition: 'all 150ms ease',\r\n                }}\r\n            >\r\n                <div style={{ fontSize: '32px', marginBottom: '8px' }}>\r\n                    \r\n                </div>\r\n                <p style={{\r\n                    margin: 0,\r\n                    fontSize: '14px',\r\n                    fontWeight: 500,\r\n                    color: 'var(--chameleon-text, #1a1a2e)'\r\n                }}>\r\n                    Drop screenshot here\r\n                </p>\r\n                <p style={{\r\n                    margin: '4px 0 0',\r\n                    fontSize: '12px',\r\n                    opacity: 0.6\r\n                }}>\r\n                    or click to upload  Cmd+V to paste\r\n                </p>\r\n            </div>\r\n\r\n            <input\r\n                ref={fileInputRef}\r\n                type=\"file\"\r\n                accept=\"image/*\"\r\n                onChange={handleFileChange}\r\n                style={{ display: 'none' }}\r\n            />\r\n\r\n            {error && (\r\n                <p style={{\r\n                    margin: '8px 0 0',\r\n                    fontSize: '12px',\r\n                    color: '#ef4444',\r\n                    textAlign: 'center',\r\n                }}>\r\n                    {error}\r\n                </p>\r\n            )}\r\n\r\n            {/* Recent capture preview */}\r\n            {preview && !isProcessing && (\r\n                <div style={{\r\n                    marginTop: '12px',\r\n                    borderRadius: '8px',\r\n                    overflow: 'hidden',\r\n                    position: 'relative',\r\n                }}>\r\n                    <img\r\n                        src={preview}\r\n                        alt=\"Last captured\"\r\n                        style={{\r\n                            width: '100%',\r\n                            height: 'auto',\r\n                            maxHeight: '100px',\r\n                            objectFit: 'cover',\r\n                        }}\r\n                    />\r\n                    <button\r\n                        onClick={() => setPreview(null)}\r\n                        style={{\r\n                            position: 'absolute',\r\n                            top: '4px',\r\n                            right: '4px',\r\n                            width: '24px',\r\n                            height: '24px',\r\n                            borderRadius: '50%',\r\n                            border: 'none',\r\n                            background: 'rgba(0,0,0,0.5)',\r\n                            color: 'white',\r\n                            cursor: 'pointer',\r\n                            fontSize: '12px',\r\n                        }}\r\n                    >\r\n                        \r\n                    </button>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n","'use client';\r\n\r\nimport { useState, useEffect, useCallback, useRef } from 'react';\r\nimport { useChameleon } from './ChameleonRoot';\r\n\r\ninterface VoiceVibeProps {\r\n    /** Callback when voice input is processed */\r\n    onResult?: (transcript: string) => void;\r\n    /** Callback to close popover after success */\r\n    onClose?: () => void;\r\n    /** Custom class name */\r\n    className?: string;\r\n}\r\n\r\n// SpeechRecognition types\r\ninterface SpeechRecognitionEvent {\r\n    resultIndex: number;\r\n    results: SpeechRecognitionResultList;\r\n}\r\n\r\ninterface SpeechRecognitionErrorEvent {\r\n    error: string;\r\n}\r\n\r\ninterface SpeechRecognitionResultList {\r\n    [index: number]: SpeechRecognitionResult;\r\n    length: number;\r\n}\r\n\r\ninterface SpeechRecognitionResult {\r\n    [index: number]: SpeechRecognitionAlternative;\r\n    isFinal: boolean;\r\n    length: number;\r\n}\r\n\r\ninterface SpeechRecognitionAlternative {\r\n    transcript: string;\r\n    confidence: number;\r\n}\r\n\r\ninterface SpeechRecognitionInstance {\r\n    continuous: boolean;\r\n    interimResults: boolean;\r\n    lang: string;\r\n    start: () => void;\r\n    stop: () => void;\r\n    abort: () => void;\r\n    onresult: ((event: SpeechRecognitionEvent) => void) | null;\r\n    onerror: ((event: SpeechRecognitionErrorEvent) => void) | null;\r\n    onend: (() => void) | null;\r\n}\r\n\r\n/**\r\n * VoiceVibe - Voice-to-Vibe Component\r\n *\r\n * \"Hey Chameleon, make it feel like a cozy coffee shop\"\r\n * Uses Web Speech API for voice recognition\r\n */\r\nexport function VoiceVibe({ onResult, onClose, className = '' }: VoiceVibeProps) {\r\n    const [isListening, setIsListening] = useState(false);\r\n    const [transcript, setTranscript] = useState('');\r\n    const [error, setError] = useState<string | null>(null);\r\n    const [isSupported, setIsSupported] = useState(true);\r\n    const recognitionRef = useRef<SpeechRecognitionInstance | null>(null);\r\n    const { setVibe, isLoading } = useChameleon();\r\n\r\n    const getErrorMessage = (error: string): string => {\r\n        switch (error) {\r\n            case 'not-allowed':\r\n                return 'Microphone access denied. Please allow microphone access.';\r\n            case 'no-speech':\r\n                return 'No speech detected. Please try again.';\r\n            case 'network':\r\n                return 'Network error. Please check your connection.';\r\n            default:\r\n                return 'Voice recognition failed. Please try again.';\r\n        }\r\n    };\r\n\r\n    const handleTranscript = useCallback(async (text: string) => {\r\n        if (!text.trim()) return;\r\n\r\n        try {\r\n            await setVibe(text.trim());\r\n            onResult?.(text.trim());\r\n            onClose?.();\r\n        } catch (err) {\r\n            console.error('Failed to set vibe from voice:', err);\r\n            setError('Failed to apply vibe. Please try again.');\r\n        }\r\n    }, [setVibe, onResult, onClose]);\r\n\r\n    // Check for browser support\r\n    useEffect(() => {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        const SpeechRecognitionAPI = (window as any).SpeechRecognition || (window as any).webkitSpeechRecognition;\r\n        if (!SpeechRecognitionAPI) {\r\n            setIsSupported(false);\r\n            return;\r\n        }\r\n\r\n        const recognition = new SpeechRecognitionAPI() as SpeechRecognitionInstance;\r\n        recognition.continuous = false;\r\n        recognition.interimResults = true;\r\n        recognition.lang = 'en-US';\r\n\r\n        recognition.onresult = (event: SpeechRecognitionEvent) => {\r\n            const current = event.resultIndex;\r\n            const result = event.results[current];\r\n            const transcriptText = result[0].transcript;\r\n\r\n            setTranscript(transcriptText);\r\n\r\n            // If this is a final result, process it\r\n            if (result.isFinal) {\r\n                handleTranscript(transcriptText);\r\n            }\r\n        };\r\n\r\n        recognition.onerror = (event: SpeechRecognitionErrorEvent) => {\r\n            console.error('Speech recognition error:', event.error);\r\n            setError(getErrorMessage(event.error));\r\n            setIsListening(false);\r\n        };\r\n\r\n        recognition.onend = () => {\r\n            setIsListening(false);\r\n        };\r\n\r\n        recognitionRef.current = recognition;\r\n\r\n        return () => {\r\n            if (recognitionRef.current) {\r\n                recognitionRef.current.abort();\r\n            }\r\n        };\r\n    }, [handleTranscript, getErrorMessage]);\r\n\r\n    const toggleListening = () => {\r\n        if (!recognitionRef.current) return;\r\n\r\n        if (isListening) {\r\n            recognitionRef.current.stop();\r\n            setIsListening(false);\r\n        } else {\r\n            setTranscript('');\r\n            setError(null);\r\n            recognitionRef.current.start();\r\n            setIsListening(true);\r\n        }\r\n    };\r\n\r\n    // Browser not supported\r\n    if (!isSupported) {\r\n        return (\r\n            <div className={`voice-vibe ${className}`}>\r\n                <div style={{\r\n                    padding: '12px',\r\n                    borderRadius: '8px',\r\n                    background: 'rgba(128, 128, 128, 0.1)',\r\n                    textAlign: 'center',\r\n                }}>\r\n                    <span style={{ fontSize: '24px', opacity: 0.5 }}></span>\r\n                    <p style={{\r\n                        margin: '8px 0 0',\r\n                        fontSize: '12px',\r\n                        opacity: 0.6,\r\n                    }}>\r\n                        Voice input not supported in this browser\r\n                    </p>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className={`voice-vibe ${className}`}>\r\n            <button\r\n                onClick={toggleListening}\r\n                disabled={isLoading}\r\n                style={{\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'center',\r\n                    gap: '8px',\r\n                    width: '100%',\r\n                    padding: '12px',\r\n                    border: `2px solid ${isListening ? '#ef4444' : 'rgba(128, 128, 128, 0.2)'}`,\r\n                    borderRadius: '8px',\r\n                    background: isListening ? 'rgba(239, 68, 68, 0.1)' : 'transparent',\r\n                    cursor: isLoading ? 'wait' : 'pointer',\r\n                    transition: 'all 150ms ease',\r\n                    opacity: isLoading ? 0.5 : 1,\r\n                }}\r\n            >\r\n                <span\r\n                    style={{\r\n                        fontSize: '20px',\r\n                        animation: isListening ? 'voicePulse 1s infinite' : 'none',\r\n                    }}\r\n                >\r\n                    {isListening ? '' : ''}\r\n                </span>\r\n                <span style={{\r\n                    fontSize: '14px',\r\n                    fontWeight: 500,\r\n                    color: 'var(--chameleon-text, #1a1a2e)',\r\n                }}>\r\n                    {isListening ? 'Listening...' : 'Speak your vibe'}\r\n                </span>\r\n            </button>\r\n\r\n            {/* Live transcript */}\r\n            {transcript && (\r\n                <div style={{\r\n                    marginTop: '8px',\r\n                    padding: '8px 12px',\r\n                    borderRadius: '8px',\r\n                    background: 'rgba(128, 128, 128, 0.05)',\r\n                    fontSize: '14px',\r\n                    fontStyle: 'italic',\r\n                    animation: 'fadeIn 200ms ease-out',\r\n                }}>\r\n                    &ldquo;{transcript}&rdquo;\r\n                </div>\r\n            )}\r\n\r\n            {/* Error message */}\r\n            {error && (\r\n                <p style={{\r\n                    margin: '8px 0 0',\r\n                    fontSize: '12px',\r\n                    color: '#ef4444',\r\n                    textAlign: 'center',\r\n                }}>\r\n                    {error}\r\n                </p>\r\n            )}\r\n\r\n            {/* Suggestions */}\r\n            <div style={{\r\n                marginTop: '10px',\r\n                fontSize: '11px',\r\n                opacity: 0.5,\r\n                textAlign: 'center',\r\n            }}>\r\n                Try: &ldquo;Make it cozy&rdquo; or &ldquo;I&apos;m a 5 year old&rdquo;\r\n            </div>\r\n\r\n            <style jsx global>{`\r\n                @keyframes voicePulse {\r\n                    0%, 100% { transform: scale(1); opacity: 1; }\r\n                    50% { transform: scale(1.2); opacity: 0.8; }\r\n                }\r\n\r\n                @keyframes fadeIn {\r\n                    from { opacity: 0; transform: translateY(-4px); }\r\n                    to { opacity: 1; transform: translateY(0); }\r\n                }\r\n            `}</style>\r\n        </div>\r\n    );\r\n}\r\n\r\n\r\n"]}